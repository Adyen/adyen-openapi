name: Notify libraries

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  notify:
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.ADYEN_AUTOMATION_BOT_ACCESS_TOKEN }}
    steps:
      - name: Node.js 
        run: |
          gh workflow run models.yml -R Adyen/adyen-node-api-library
          gh workflow run services.yml -R Adyen/adyen-node-api-library
      - name: Ruby
        run: gh workflow run services.yml -R Adyen/adyen-ruby-api-library
      - name: SDK Automation
        run: gh workflow run gradle.yml -R Adyen/adyen-sdk-automation
      - name: Postman 
        run: gh workflow run trigger-postman.yml -R Adyen/adyen-postman
